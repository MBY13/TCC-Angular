<div class="main-content">
  <div class="container-fluid">
    <div class="row">
      <div class="col-md-12">
        <mat-form-field appearance="outline" class="custom-dropdown">
          <mat-label>Filtrar por Semestre</mat-label>
          <mat-select #filtroDisciplinas (selectionChange)="filtrarPorDisciplina($event)">
            <mat-option>-- Selecionar Disciplina --</mat-option>
            <mat-option *ngFor="let semestre of semestres.result" [value]="semestre.id">
              {{ semestre.nome }}
            </mat-option>
          </mat-select>
          <button mat-button *ngIf="filtroDisciplinas.value" matSuffix mat-icon-button aria-label="Clear" (click)="limparFiltro()">
            <mat-icon>close</mat-icon>
          </button>
        </mat-form-field>
        <div class="card">
          <div class="card-header card-header-rose">
            <h4 class="card-title">Notas Siga</h4>
            <p class="card-category"> Disciplinas do siga</p>
          </div>
          <div class="cor-rosa card-body">
            <div class="table-responsive">
              <table class="table table-hover" mat-table [dataSource]="dataSourceResumida">

                <!-- Disciplina -->
                <ng-container matColumnDef="Disciplina">
                  <th mat-header-cell *matHeaderCellDef class="text-primary"> <strong>Disciplina</strong> </th>
                  <td mat-cell *matCellDef="let NotasResumidas"> {{ NotasResumidas.Disciplina }} </td>
                </ng-container>

                <!-- Nota -->
                <ng-container matColumnDef="Nota">
                  <th mat-header-cell *matHeaderCellDef class="text-primary"> <strong>Nota</strong> </th>
                  <td mat-cell *matCellDef="let NotasResumidas"> {{ NotasResumidas.Nota | number:'1.2-2' }} </td>
                </ng-container>

                <!-- Frequência -->
                <ng-container matColumnDef="Frequencia">
                  <th mat-header-cell *matHeaderCellDef class="text-primary"> <strong>Frequência</strong> </th>
                  <td mat-cell *matCellDef="let NotasResumidas"> {{ NotasResumidas.Frequencia | number:'1.2-2' }}%</td>
                </ng-container>

                <!-- Resultado -->
                <ng-container matColumnDef="Resultado">
                  <th mat-header-cell *matHeaderCellDef class="text-primary"> <strong>Resultado</strong> </th>
                  <td mat-cell *matCellDef="let NotasResumidas"> {{ NotasResumidas.Resultado}} </td>
                </ng-container>

                <!-- Definindo as colunas -->
                <tr mat-header-row *matHeaderRowDef="['Disciplina', 'Nota', 'Frequencia', 'Resultado']"></tr>
                <tr mat-row *matRowDef="let row; columns: ['Disciplina', 'Nota', 'Frequencia', 'Resultado'];"
                  (click)="filtrarDetalhes(row)" [class.selected-row]="isRowSelected(row)"></tr>
              </table>
            </div>
          </div>
        </div>
      </div>

      <div class="col-md-12">
        <div class="card card-plain" *ngIf="mostrarTabelaDetalhada && filteredNotasDetalhadas.length > 0">
          <div class="card-header card-header-rose">
            <h4 class="card-title mt-0">Detalhamento Siga</h4>
            <p class="card-category">Detalhamento de Notas do Siga </p>
          </div>
          <div class="card-body">
            <div class="table-responsive">
              <table class="table table-hover" mat-table [dataSource]="filteredNotasDetalhadas">

                <!-- Avaliação -->
                <ng-container matColumnDef="Avaliacao">
                  <th mat-header-cell *matHeaderCellDef class="text-primary"> <strong>Avaliação</strong> </th>
                  <td mat-cell *matCellDef="let NotasDetalhadas"> {{ NotasDetalhadas.Avaliacao }} </td>
                </ng-container>

                <!-- Data -->
                <ng-container matColumnDef="Data">
                  <th mat-header-cell *matHeaderCellDef class="text-primary"> <strong>Data</strong> </th>
                  <td mat-cell *matCellDef="let NotasDetalhadas"> {{ NotasDetalhadas.Data | date:'dd/MM/yyyy' }} </td>
                </ng-container>

                <!-- Conteudo -->
                <ng-container matColumnDef="Conteudo">
                  <th mat-header-cell *matHeaderCellDef class="text-primary"> <strong>Conteúdo</strong> </th>
                  <td mat-cell *matCellDef="let NotasDetalhadas"> {{ NotasDetalhadas.Conteudo }} </td>
                </ng-container>

                <!-- Nota -->
                <ng-container matColumnDef="Nota">
                  <th mat-header-cell *matHeaderCellDef class="text-primary"> <strong>Nota</strong> </th>
                  <td mat-cell *matCellDef="let NotasDetalhadas"> {{ NotasDetalhadas.Nota | number:'1.2-2' }} </td>
                </ng-container>

                <!-- Definindo as colunas -->
                <tr mat-header-row *matHeaderRowDef="['Avaliacao', 'Data', 'Conteudo', 'Nota']"></tr>
                <tr mat-row *matRowDef="let row; columns: ['Avaliacao', 'Data', 'Conteudo', 'Nota'];"></tr>
              </table>
            </div>
          </div>
        </div>
        <div *ngIf="!mostrarTabelaDetalhada || filteredNotasDetalhadas.length === 0" class="alert alert-info"
          style="background-color: #323232;">
          Não há notas detalhadas disponíveis para esta disciplina.
        </div>
      </div>
    </div>
  </div>
</div>
